.\" Text automatically generated by txt2man
.TH robinhood 1 "07 July 2016" "" "Robinhood 3.0"
.SH NAME
\fBrobinhood \fP- policy engine and statistics tool for large file systems
.SH SYNOPSIS
.nf
.fam C
  \fBrobinhood\fP [\fIoptions\fP]

.fam T
.fi
.fam T
.fi
.SH ACTIONS

.TP
.B
\fB-S\fP, \fB--scan\fP[=\fIdir\fP]
Scan the filesystem namespace. If \fIdir\fP is specified, only scan the specified subdir.
.TP
.B
\fB-r\fP, \fB--read-log\fP[=\fImdt_idx\fP]
Read events from MDT ChangeLog.
If \fImdt_idx\fP is specified, only read ChangeLogs for the given MDT.
Else, start 1 changelog reader thread per MDT (with DNE).
.TP
.B
\fB--run\fP[=all]
Run all polices (based on triggers).
.TP
.B
\fB--run\fP=\fIpolicy1\fP(\fIargs\fP),\fIpolicy2\fP(\fIargs\fP)\.\.\.
Run the given policies with the specified arguments. 
See "Policy run \fIoptions\fP" for details about \fIargs\fP.
.TP
.B
\fB-C\fP \fIpolicy1\fP,\fIpolicy2\fP\.\.\., \fB--check-thresholds\fP[=\fIpolicy1\fP,\fIpolicy2\fP\.\.\.]
Only check trigger thresholds without applying policy actions.
If no policy is specified (or 'all'), check all triggers.
.SH POLICY RUN OPTIONS

\fIargs\fP
Comma-separated list of <param>=<value>.
.PP
.nf
.fam C
           e.g. --run=cleanup(target=user:foo,max-count=1000)

.fam T
.fi
.RS
The following parameters are allowed:
.PP
target=\fItgt\fP
.PP
.nf
.fam C
           Targeted subset of entries for the policy run.

           tgt can be one of:

.nf
.fam C
               all (all entries), user:username, group:grpname,

               file:path, class:fileclass, ost:ost_idx, pool:poolname.

.fam T
.fi
max-count=\fInbr\fP
.PP
.nf
.fam C
           Max number of actions to execute for a policy run.

.fam T
.fi
max-vol=\fIsize\fP
.PP
.nf
.fam C
           Max volume of entries impacted by a policy run.

.fam T
.fi
target-usage=\fIpct\fP
.PP
.nf
.fam C
           Targeted filesystem or OST usage for a policy run, in percent.



.fam T
.fi
.RE
.TP
.B
\fB-t\fP \fItgt\fP, \fB--target\fP=\fItgt\fP
Specify the default target for policy runs (see target syntax above).
.TP
.B
\fB--target-usage\fP=\fIpct\fP
Specifies the default target disk usage (in \fIpct\fP) for 'all', 'ost' or 'pool' targets.
.TP
.B
\fB-I\fP, \fB--ignore-conditions\fP
Apply policy to all entries in policy scope, without checking policy rule conditions.
.TP
.B
\fB-F\fP, \fB--force\fP
Force applying policies even if no full scan has never been done (partial DB contents).
.TP
.B
\fB--no-limit\fP
Don't limit the maximum number/volume of policy actions per pass.
.TP
.B
\fB--dry-run\fP
Only report policy actions that would be performed without really doing them.
Note: Robinhood DB is impacted as if the reported actions were really done.
.TP
.B
\fB--force-all\fP
Force applying a policy to all eligible entries, without considering
policy limits and rule conditions.
This is equivalent to: \fB--once\fP \fB--no-limit\fP \fB--ignore-conditions\fP \fB--force\fP
.SH SCANNING OPTIONS

.TP
.B
\fB--no-gc\fP
Garbage collection of entries in DB is a long operation when terminating
a scan. This skips this operation if you don't care about removed
entries (or don't expect entries to be removed).
This is also recommended for partial scanning (see \fB-scan\fP=\fIdir\fP option).
.SH OUTPUT OPTIONS

.TP
.B
\fB--diff\fP=\fIattrset\fP
When scanning or reading changelogs, display changes for the given set of attributes (to stdout).
\fIattrset\fP is a list of values in: path,posix,stripe,all,status,notimes,noatime.
.SH BEHAVIOR OPTIONS

.TP
.B
\fB-O\fP, \fB--once\fP
Perform only one pass of the specified action and exit.
.TP
.B
\fB-d\fP, \fB--detach\fP
Daemonize the process (detach from parent process).
.TP
.B
\fB--alter-db\fP
Allow database schema modifications (backup your DB before using this).
.SH CONFIG FILE OPTIONS

.TP
.B
\fB-f\fP \fIcfg_file\fP, \fB--config-file\fP=\fIcfg_file\fP
Path to configuration file (or short name).
.TP
.B
\fB-T\fP \fIoutput_file\fP, \fB--template\fP[=\fIoutput_file\fP]
Write a configuration file template to the specified file.
.TP
.B
\fB-D\fP, \fB--defaults\fP
Display default configuration values.
.TP
.B
\fB--test-syntax\fP
Check configuration file and exit.
.SH LOG OPTIONS

.TP
.B
\fB-L\fP \fIlogfile\fP, \fB--log-file\fP=\fIlogfile\fP
Force the path to the log file (overrides configuration value).
Special values "stdout" and "stderr" can be used.
.TP
.B
\fB-l\fP \fIloglevel\fP, \fB--log-level\fP=\fIloglevel\fP
Force the log verbosity level (overrides configuration value).
Allowed values: CRIT, MAJOR, EVENT, VERB, DEBUG, FULL.
.SH MISCELLANEOUS OPTIONS

.TP
.B
\fB-h\fP, \fB--help\fP
Display a short help about command line \fIoptions\fP.
.TP
.B
\fB-V\fP, \fB--version\fP
Display version info
.TP
.B
\fB-p\fP \fIpidfile\fP, \fB--pid-file\fP=\fIpidfile\fP
Pid file (used for service management).
.SH SEE ALSO
\fBrbh-report\fP(1), \fBrbh-find\fP(1), \fBrbh-du\fP(1), \fBrbh-diff\fP(1)
